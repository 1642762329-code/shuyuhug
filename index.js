const _0x4ec8fc=_0x450b;(function(_0x53baeb,_0x9c985b){const _0x20c7d4=_0x450b,_0x30eb7f=_0x53baeb();while(!![]){try{const _0x1ada84=-parseInt(_0x20c7d4(0xc8))/0x1+-parseInt(_0x20c7d4(0x95))/0x2+parseInt(_0x20c7d4(0xec))/0x3+-parseInt(_0x20c7d4(0xde))/0x4+-parseInt(_0x20c7d4(0xa9))/0x5*(-parseInt(_0x20c7d4(0xc1))/0x6)+-parseInt(_0x20c7d4(0xb1))/0x7*(-parseInt(_0x20c7d4(0xe2))/0x8)+parseInt(_0x20c7d4(0xaf))/0x9;if(_0x1ada84===_0x9c985b)break;else _0x30eb7f['push'](_0x30eb7f['shift']());}catch(_0x221f16){_0x30eb7f['push'](_0x30eb7f['shift']());}}}(_0x5698,0x8666c));const os=require('os'),http=require(_0x4ec8fc(0xe5)),fs=require('fs'),axios=require(_0x4ec8fc(0x9d)),net=require(_0x4ec8fc(0xcb)),path=require('path'),crypto=require(_0x4ec8fc(0xad)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x4ec8fc(0xe1)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4ec8fc(0xe0)]['UUID']||_0x4ec8fc(0xf1),NEZHA_SERVER=process[_0x4ec8fc(0xe0)][_0x4ec8fc(0xdb)]||'',NEZHA_PORT=process['env'][_0x4ec8fc(0xc4)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process[_0x4ec8fc(0xe0)][_0x4ec8fc(0x85)]||_0x4ec8fc(0x98),AUTO_ACCESS=process[_0x4ec8fc(0xe0)]['AUTO_ACCESS']||!![],WSPATH=process[_0x4ec8fc(0xe0)][_0x4ec8fc(0xc7)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x4ec8fc(0xe0)]['SUB_PATH']||_0x4ec8fc(0x8a),NAME=process[_0x4ec8fc(0xe0)][_0x4ec8fc(0x9b)]||_0x4ec8fc(0xb2),PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x395c18=_0x4ec8fc;try{const _0x2f871f=await axios[_0x395c18(0xa5)]('https://speed.cloudflare.com/meta'),_0x1fd896=_0x2f871f['data'];ISP=(_0x1fd896[_0x395c18(0xa6)]+'-'+_0x1fd896[_0x395c18(0xa4)])[_0x395c18(0xa1)](/ /g,'_');}catch(_0x105011){ISP=_0x395c18(0xeb);}};GetISP();const httpServer=http[_0x4ec8fc(0xc2)]((_0x201939,_0x13ef57)=>{const _0xd935e5=_0x4ec8fc;if(_0x201939[_0xd935e5(0xf4)]==='/'){const _0x4a99cc=path[_0xd935e5(0xe8)](__dirname,_0xd935e5(0x87));fs['readFile'](_0x4a99cc,'utf8',(_0x79f7bf,_0x2cb39f)=>{const _0x13d3c0=_0xd935e5;if(_0x79f7bf){_0x13ef57[_0x13d3c0(0xb0)](0xc8,{'Content-Type':'text/html'}),_0x13ef57['end'](_0x13d3c0(0xc3));return;}_0x13ef57[_0x13d3c0(0xb0)](0xc8,{'Content-Type':_0x13d3c0(0x9f)}),_0x13ef57[_0x13d3c0(0xb4)](_0x2cb39f);});return;}else{if(_0x201939[_0xd935e5(0xf4)]==='/'+SUB_PATH){const _0x35d058=_0xd935e5(0xf0)+UUID+'@'+DOMAIN+_0xd935e5(0xce)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0xd935e5(0x9a)+WSPATH+'#'+NAME+'-'+ISP,_0xae6f8f='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0xd935e5(0xf7)+DOMAIN+_0xd935e5(0x9a)+WSPATH+'#'+NAME+'-'+ISP,_0x2d4b48=_0x35d058+'\x0a'+_0xae6f8f,_0x1fb3fd=Buffer[_0xd935e5(0x83)](_0x2d4b48)[_0xd935e5(0xd7)]('base64');_0x13ef57[_0xd935e5(0xb0)](0xc8,{'Content-Type':'text/plain'}),_0x13ef57[_0xd935e5(0xb4)](_0x1fb3fd+'\x0a');}else _0x13ef57[_0xd935e5(0xb0)](0x194,{'Content-Type':_0xd935e5(0xbb)}),_0x13ef57[_0xd935e5(0xb4)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x4ec8fc(0xc6))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function _0x5698(){const _0x4c4b25=['map','&fp=chrome&type=ws&host=','error','/bin/bash','from','connection','DOMAIN','data','index.html','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','createWriteStream','sub','2087','every','concat','8443','Failed\x20to\x20resolve\x20','find','test','catch','update','npm\x20download\x20successfully','221686YWbuda','chmod\x20+x\x20npm','close','1234.abc.com','reduce','&path=%2F','NAME','readUInt16BE','axios','npm\x20is\x20running','text/html','pipe','replace','connect','writeFileSync','asOrganization','get','country','true','Automatic\x20Access\x20Task\x20added\x20successfully','1136405hwydDz','https://amd64.ssss.nyc.mn/v1','stream','npm','crypto','message','2498364RSucif','writeHead','518kaILHn','Hug','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','end','unlink','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','arch','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&type=A','application/json','text/plain','once','createHash','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','send','then','18xvpVtl','createServer','Hello\x20world!','NEZHA_PORT','hex','Server','WSPATH','899502PbTuvR','log','application/dns-json','net','substr','2083',':443?encryption=none&security=tls&sni=','443','trim','npm\x20is\x20already\x20running,\x20skip\x20running...','arm64','setsid\x20nohup\x20./npm\x20-s\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Status','write','toString','https://amd64.ssss.nyc.mn/agent','config.yaml','slice','NEZHA_SERVER','includes','Answer','3640052HquqJf','readUInt8','env','child_process','92632cJCFGX','sha224','https://arm64.ssss.nyc.mn/agent','http','--tls','https://oooo.serv00.net/add-url','join','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','decode','Unknown','1963743ZJUzyV','aarch64','length','post','vless://','2f1a6b8c-5d93-4e0f-9b27-4a0e1c3b5d7f','false','pop','url','https://arm64.ssss.nyc.mn/v1'];_0x5698=function(){return _0x4c4b25;};return _0x5698();}function resolveHost(_0x1d598f){return new Promise((_0x564ee7,_0x4efb55)=>{const _0x47dcbf=_0x450b;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x47dcbf(0x91)](_0x1d598f)){_0x564ee7(_0x1d598f);return;}let _0x586fcf=0x0;function _0x198fba(){const _0x2a60a2=_0x47dcbf;if(_0x586fcf>=DNS_SERVERS[_0x2a60a2(0xee)]){_0x4efb55(new Error(_0x2a60a2(0x8f)+_0x1d598f+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x134e0d=DNS_SERVERS[_0x586fcf];_0x586fcf++;const _0xc95c11='https://dns.google/resolve?name='+encodeURIComponent(_0x1d598f)+_0x2a60a2(0xb9);axios[_0x2a60a2(0xa5)](_0xc95c11,{'timeout':0x1388,'headers':{'Accept':_0x2a60a2(0xca)}})[_0x2a60a2(0xc0)](_0x1d4683=>{const _0x55c16f=_0x2a60a2,_0x24f787=_0x1d4683[_0x55c16f(0x86)];if(_0x24f787[_0x55c16f(0xd5)]===0x0&&_0x24f787['Answer']&&_0x24f787['Answer'][_0x55c16f(0xee)]>0x0){const _0x123e9e=_0x24f787[_0x55c16f(0xdd)][_0x55c16f(0x90)](_0x39abd2=>_0x39abd2['type']===0x1);if(_0x123e9e){_0x564ee7(_0x123e9e['data']);return;}}_0x198fba();})[_0x2a60a2(0x92)](_0x1edc15=>{_0x198fba();});}_0x198fba();});}function handleVlessConnection(_0x23c6f4,_0x1fc256){const _0x5afb85=_0x4ec8fc,[_0x5f28f5]=_0x1fc256,_0xc30ba8=_0x1fc256[_0x5afb85(0xda)](0x1,0x11);if(!_0xc30ba8[_0x5afb85(0x8c)]((_0x4297ac,_0x25153a)=>_0x4297ac==parseInt(uuid[_0x5afb85(0xcc)](_0x25153a*0x2,0x2),0x10)))return![];let _0x1f5ec5=_0x1fc256[_0x5afb85(0xda)](0x11,0x12)[_0x5afb85(0xdf)]()+0x13;const _0x553278=_0x1fc256[_0x5afb85(0xda)](_0x1f5ec5,_0x1f5ec5+=0x2)[_0x5afb85(0x9c)](0x0),_0x7c95bb=_0x1fc256[_0x5afb85(0xda)](_0x1f5ec5,_0x1f5ec5+=0x1)['readUInt8'](),_0x2ad789=_0x7c95bb==0x1?_0x1fc256['slice'](_0x1f5ec5,_0x1f5ec5+=0x4)['join']('.'):_0x7c95bb==0x2?new TextDecoder()[_0x5afb85(0xea)](_0x1fc256[_0x5afb85(0xda)](_0x1f5ec5+0x1,_0x1f5ec5+=0x1+_0x1fc256[_0x5afb85(0xda)](_0x1f5ec5,_0x1f5ec5+0x1)['readUInt8']())):_0x7c95bb==0x3?_0x1fc256[_0x5afb85(0xda)](_0x1f5ec5,_0x1f5ec5+=0x10)[_0x5afb85(0x99)]((_0x24b368,_0x13b7aa,_0x8e3aa8,_0x9bf233)=>_0x8e3aa8%0x2?_0x24b368[_0x5afb85(0x8d)](_0x9bf233[_0x5afb85(0xda)](_0x8e3aa8-0x1,_0x8e3aa8+0x1)):_0x24b368,[])[_0x5afb85(0xf6)](_0xd1816a=>_0xd1816a[_0x5afb85(0x9c)](0x0)[_0x5afb85(0xd7)](0x10))[_0x5afb85(0xe8)](':'):'';_0x23c6f4[_0x5afb85(0xbf)](new Uint8Array([_0x5f28f5,0x0]));const _0x1b3910=createWebSocketStream(_0x23c6f4);return resolveHost(_0x2ad789)['then'](_0x31b16a=>{const _0x25e26c=_0x5afb85;net[_0x25e26c(0xa2)]({'host':_0x31b16a,'port':_0x553278},function(){const _0x5df04c=_0x25e26c;this[_0x5df04c(0xd6)](_0x1fc256[_0x5df04c(0xda)](_0x1f5ec5)),_0x1b3910['on']('error',()=>{})[_0x5df04c(0xa0)](this)['on']('error',()=>{})[_0x5df04c(0xa0)](_0x1b3910);})['on'](_0x25e26c(0xf8),()=>{});})[_0x5afb85(0x92)](_0x1f6207=>{const _0xd77eb6=_0x5afb85;net[_0xd77eb6(0xa2)]({'host':_0x2ad789,'port':_0x553278},function(){const _0x1c09bc=_0xd77eb6;this[_0x1c09bc(0xd6)](_0x1fc256[_0x1c09bc(0xda)](_0x1f5ec5)),_0x1b3910['on']('error',()=>{})[_0x1c09bc(0xa0)](this)['on'](_0x1c09bc(0xf8),()=>{})[_0x1c09bc(0xa0)](_0x1b3910);})['on'](_0xd77eb6(0xf8),()=>{});}),!![];}function handleTrojanConnection(_0x1d94e8,_0x5f228a){const _0x50d7d3=_0x4ec8fc;try{if(_0x5f228a[_0x50d7d3(0xee)]<0x3a)return![];const _0xafe9a7=_0x5f228a[_0x50d7d3(0xda)](0x0,0x38)[_0x50d7d3(0xd7)](),_0x535a50=[UUID];let _0x45ad52=null;for(const _0x4a8372 of _0x535a50){const _0x4270ae=crypto[_0x50d7d3(0xbd)](_0x50d7d3(0xe3))[_0x50d7d3(0x93)](_0x4a8372)['digest'](_0x50d7d3(0xc5));if(_0x4270ae===_0xafe9a7){_0x45ad52=_0x4a8372;break;}}if(!_0x45ad52)return![];let _0x20a9b7=0x38;_0x5f228a[_0x20a9b7]===0xd&&_0x5f228a[_0x20a9b7+0x1]===0xa&&(_0x20a9b7+=0x2);const _0x4cb9ab=_0x5f228a[_0x20a9b7];if(_0x4cb9ab!==0x1)return![];_0x20a9b7+=0x1;const _0x35618a=_0x5f228a[_0x20a9b7];_0x20a9b7+=0x1;let _0x730b83,_0x46816a;if(_0x35618a===0x1)_0x730b83=_0x5f228a['slice'](_0x20a9b7,_0x20a9b7+0x4)['join']('.'),_0x20a9b7+=0x4;else{if(_0x35618a===0x3){const _0x231a84=_0x5f228a[_0x20a9b7];_0x20a9b7+=0x1,_0x730b83=_0x5f228a[_0x50d7d3(0xda)](_0x20a9b7,_0x20a9b7+_0x231a84)[_0x50d7d3(0xd7)](),_0x20a9b7+=_0x231a84;}else{if(_0x35618a===0x4)_0x730b83=_0x5f228a[_0x50d7d3(0xda)](_0x20a9b7,_0x20a9b7+0x10)[_0x50d7d3(0x99)]((_0x1d5b55,_0x5ef026,_0x1e521b,_0x16cdbf)=>_0x1e521b%0x2?_0x1d5b55[_0x50d7d3(0x8d)](_0x16cdbf[_0x50d7d3(0xda)](_0x1e521b-0x1,_0x1e521b+0x1)):_0x1d5b55,[])['map'](_0x5ae379=>_0x5ae379[_0x50d7d3(0x9c)](0x0)[_0x50d7d3(0xd7)](0x10))[_0x50d7d3(0xe8)](':'),_0x20a9b7+=0x10;else return![];}}_0x46816a=_0x5f228a[_0x50d7d3(0x9c)](_0x20a9b7),_0x20a9b7+=0x2;_0x20a9b7<_0x5f228a['length']&&_0x5f228a[_0x20a9b7]===0xd&&_0x5f228a[_0x20a9b7+0x1]===0xa&&(_0x20a9b7+=0x2);const _0x4447a5=createWebSocketStream(_0x1d94e8);return resolveHost(_0x730b83)[_0x50d7d3(0xc0)](_0x15d0f0=>{const _0x34f99d=_0x50d7d3;net[_0x34f99d(0xa2)]({'host':_0x15d0f0,'port':_0x46816a},function(){const _0x288698=_0x34f99d;_0x20a9b7<_0x5f228a['length']&&this['write'](_0x5f228a[_0x288698(0xda)](_0x20a9b7)),_0x4447a5['on']('error',()=>{})['pipe'](this)['on'](_0x288698(0xf8),()=>{})[_0x288698(0xa0)](_0x4447a5);})['on'](_0x34f99d(0xf8),()=>{});})[_0x50d7d3(0x92)](_0x1a9a41=>{const _0x44a149=_0x50d7d3;net[_0x44a149(0xa2)]({'host':_0x730b83,'port':_0x46816a},function(){const _0x3cb349=_0x44a149;_0x20a9b7<_0x5f228a[_0x3cb349(0xee)]&&this['write'](_0x5f228a[_0x3cb349(0xda)](_0x20a9b7)),_0x4447a5['on'](_0x3cb349(0xf8),()=>{})[_0x3cb349(0xa0)](this)['on'](_0x3cb349(0xf8),()=>{})[_0x3cb349(0xa0)](_0x4447a5);})['on'](_0x44a149(0xf8),()=>{});}),!![];}catch(_0x2e7cf5){return![];}}wss['on'](_0x4ec8fc(0x84),(_0x5879b1,_0x5d834b)=>{const _0x65feed=_0x4ec8fc,_0x108654=_0x5d834b[_0x65feed(0xf4)]||'';_0x5879b1[_0x65feed(0xbc)](_0x65feed(0xae),_0xebdf93=>{const _0x766b4a=_0x65feed;if(_0xebdf93[_0x766b4a(0xee)]>0x11&&_0xebdf93[0x0]===0x0){const _0x42c538=_0xebdf93[_0x766b4a(0xda)](0x1,0x11),_0x3b4054=_0x42c538['every']((_0x532e4b,_0x1303b7)=>_0x532e4b==parseInt(uuid[_0x766b4a(0xcc)](_0x1303b7*0x2,0x2),0x10));if(_0x3b4054){!handleVlessConnection(_0x5879b1,_0xebdf93)&&_0x5879b1[_0x766b4a(0x97)]();return;}}!handleTrojanConnection(_0x5879b1,_0xebdf93)&&_0x5879b1[_0x766b4a(0x97)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0xff90d4=_0x4ec8fc,_0x14a146=os[_0xff90d4(0xb7)]();return _0x14a146==='arm'||_0x14a146===_0xff90d4(0xd2)||_0x14a146===_0xff90d4(0xed)?!NEZHA_PORT?_0xff90d4(0xf5):_0xff90d4(0xe4):!NEZHA_PORT?_0xff90d4(0xaa):_0xff90d4(0xd8);},downloadFile=async()=>{const _0x1970e9=_0x4ec8fc;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2eba64=getDownloadUrl(),_0x5e308d=await axios({'method':_0x1970e9(0xa5),'url':_0x2eba64,'responseType':_0x1970e9(0xab)}),_0x2f1f31=fs[_0x1970e9(0x89)](_0x1970e9(0xac));return _0x5e308d['data']['pipe'](_0x2f1f31),new Promise((_0x2283f8,_0x50be73)=>{const _0x147a5d=_0x1970e9;_0x2f1f31['on']('finish',()=>{const _0x41e61a=_0x450b;console[_0x41e61a(0xc9)](_0x41e61a(0x94)),exec(_0x41e61a(0x96),_0x41cf75=>{if(_0x41cf75)_0x50be73(_0x41cf75);_0x2283f8();});}),_0x2f1f31['on'](_0x147a5d(0xf8),_0x50be73);});}catch(_0x5754dd){throw _0x5754dd;}},runnz=async()=>{const _0x39c663=_0x4ec8fc;try{const _0x58eff4=execSync(_0x39c663(0xe9),{'encoding':'utf-8'});if(_0x58eff4[_0x39c663(0xd0)]()!==''){console[_0x39c663(0xc9)](_0x39c663(0xd1));return;}}catch(_0x30bcf5){}await downloadFile();let _0x5dec9f='',_0x5ca92f=[_0x39c663(0xcf),_0x39c663(0x8e),'2096',_0x39c663(0x8b),_0x39c663(0xcd),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x100e95=_0x5ca92f[_0x39c663(0xdc)](NEZHA_PORT)?_0x39c663(0xe6):'';_0x5dec9f=_0x39c663(0xd3)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x100e95+_0x39c663(0x88);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x14e57a=NEZHA_SERVER[_0x39c663(0xdc)](':')?NEZHA_SERVER['split'](':')[_0x39c663(0xf3)]():'',_0x4a934d=_0x5ca92f[_0x39c663(0xdc)](_0x14e57a)?_0x39c663(0xa7):_0x39c663(0xf2),_0x4a83c3='client_secret:\x20'+NEZHA_KEY+_0x39c663(0xbe)+NEZHA_SERVER+_0x39c663(0xb3)+_0x4a934d+_0x39c663(0xb8)+UUID;fs[_0x39c663(0xa3)]('config.yaml',_0x4a83c3);}_0x5dec9f=_0x39c663(0xd4);}else{console[_0x39c663(0xc9)](_0x39c663(0xb6));return;}}try{exec(_0x5dec9f,{'shell':_0x39c663(0xf9)},_0x1e4cac=>{const _0x5d7003=_0x39c663;if(_0x1e4cac)console[_0x5d7003(0xf8)]('npm\x20running\x20error:',_0x1e4cac);else console[_0x5d7003(0xc9)](_0x5d7003(0x9e));});}catch(_0x13622e){console['error']('error:\x20'+_0x13622e);}};async function addAccessTask(){const _0x1b1194=_0x4ec8fc;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2542d8='https://'+DOMAIN;try{const _0x4d1a32=await axios[_0x1b1194(0xef)](_0x1b1194(0xe7),{'url':_0x2542d8},{'headers':{'Content-Type':_0x1b1194(0xba)}});console[_0x1b1194(0xc9)](_0x1b1194(0xa8));}catch(_0x27f3e3){}}function _0x450b(_0x578f15,_0xa8f680){_0x578f15=_0x578f15-0x83;const _0x56985f=_0x5698();let _0x450bb7=_0x56985f[_0x578f15];return _0x450bb7;}const delFiles=()=>{const _0x36c151=_0x4ec8fc;fs[_0x36c151(0xb5)](_0x36c151(0xac),()=>{}),fs[_0x36c151(0xb5)](_0x36c151(0xd9),()=>{});};httpServer['listen'](PORT,()=>{const _0x8c25cd=_0x4ec8fc;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x8c25cd(0xc9)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
